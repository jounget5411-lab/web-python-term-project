# 🎯 실전 모의투자 시스템 v2.5

강의 내용을 기반으로 개발한 **최적 자동화 전략 찾기** Python 모의투자 시스템입니다.

## 🎯 프로그램 목적

과거 데이터로 다양한 전략을 백테스팅하여 **가장 수익률이 높은 자동화 규칙**을 찾습니다.

---

## ⭐ 주요 기능

### 1. 💰 계좌 관리
- 가상 자산 입출금, 잔액 조회

### 2. 📈 실제 주식 데이터
- **한국**: 삼성전자, 카카오, 네이버, SK하이닉스, LG화학
- **미국**: 애플, 테슬라, 구글, 마이크로소프트, 엔비디아
- 또는 직접 티커 입력

### 3. 📊 6가지 매매 전략
1. **SMA 크로스오버** - 단순이동평균 (초보자 추천)
2. **EMA 크로스오버** - 지수이동평균 (빠른 반응)
3. **RSI 전략** - 과매수/과매도 (역추세)
4. **MACD 전략** - 추세 추종
5. **볼린저 밴드** - 변동성 활용
6. **모멘텀 전략** - 강세 추종

### 4. ⚙️ 자동화 규칙 커스터마이징 (v2.5 신규)
- **파라미터 자유 조정** - SMA(5,20) → SMA(10,50) 변경 가능
- **자세한 설명** - 각 숫자의 의미와 영향 안내
- **설정 자동 저장** - 변경한 규칙 재사용 가능
- **실시간 반영** - 백테스팅 시 자동 적용

### 5. 🏆 수익률 랭킹
- 모든 백테스팅 결과 자동 저장
- 수익률 순위, 상세 내역 확인

### 6. 📉 차트 시각화
- 캔들스틱 차트, 매수/매도 포인트 표시
- Buy & Hold 벤치마크 비교

---

## 🚀 설치 및 실행

```bash
cd mock-investing
poetry install
poetry run start
```

**Windows 한글 깨짐 해결:**
```powershell
$env:PYTHONIOENCODING = 'utf-8'
poetry run start
```

---

## 💡 사용 예시

### 기본 백테스팅
1. `1` → 100만원 입금
2. `2` → 백테스팅 시작
3. 종목 선택 (예: 삼성전자)
4. 기간 선택 (예: 3개월)
5. 전략 선택 (예: SMA)
6. 결과 확인 + 차트 보기

### 커스텀 규칙으로 최적화
1. `5` → 자동화 규칙 설정
2. `6` → 모멘텀 전략 선택
3. 파라미터 변경: 기간 10일 → 5일, 임계값 2% → 5%
4. 저장 후 `2`로 백테스팅
5. 여러 설정 비교해서 최고 수익률 찾기!

---

## 📋 메뉴 구조

```
1. 💰 계좌 관리
2. 📈 모의투자 시작 (백테스팅)
3. 🏆 수익률 랭킹
4. 📉 차트만 보기
5. ⚙️  자동화 규칙 설정
0. 🚪 종료
```

---

## 📁 프로젝트 구조

```
mock-investing/
├── assets/                   # 자동 생성 파일들
│   ├── account.json          # 계좌 정보
│   ├── trades.csv            # 거래 내역
│   ├── backtest_history.json # 백테스팅 결과
│   └── strategy_config.json  # 커스텀 전략 설정
├── src/mock_investing/
│   ├── main.py               # 메인 프로그램
│   ├── models.py             # 데이터 클래스
│   ├── account.py            # 계좌 관리
│   ├── market_data.py        # 주식 데이터
│   ├── indicators.py         # 기술적 지표
│   ├── strategies.py         # 매매 전략
│   ├── strategy_config.py    # 전략 설정 관리
│   ├── strategy_menu.py      # 전략 설정 UI
│   ├── exec_engine.py        # 체결 로직
│   ├── history.py            # 결과 관리
│   └── visualization.py      # 차트 시각화
├── pyproject.toml
└── README.md
```

---

## 🛠️ 사용 기술

- **yfinance**: 실제 주식 데이터 (무료, 15분 지연)
- **matplotlib**: 차트 시각화
- **pandas**: 데이터 분석
- **Poetry**: 프로젝트 관리

---

## 📊 주요 업데이트 내역

### v2.5 - 커스텀 규칙 설정
- ✅ 6가지 전략 파라미터 조정 기능
- ✅ 자세한 설명 제공
- ✅ 설정 자동 저장 및 적용

### v2.4 - 현실성 개선
- ✅ Next Open 매매 (신호 다음날 시가 체결)
- ✅ 슬리피지 0.1% 반영
- ✅ Buy & Hold 벤치마크 비교
- ✅ 백테스팅 종료 시 자동 청산

### v2.3 - 시각화 개선
- ✅ 그래프 마커 3배 확대
- ✅ 랭킹 시스템 완전 개편
- ✅ 전체 거래 내역 저장

### v2.2 - 버그 수정 및 UX 개선
- ✅ UnboundLocalError 해결
- ✅ 스포일러 방지 (백테스팅 시 미래 결과 숨김)
- ✅ 수수료율 입력 버그 수정
- ✅ 거래 안 되는 이유 상세 분석

---

## ⚠️ 주의사항

### 교육용 프로그램
- 실제 투자 권유가 아닙니다
- 과거 수익률 ≠ 미래 수익
- 실제 투자 시 손실 책임은 본인에게 있음

### 알려진 한계 (의도적 단순화)
- 고정 슬리피지 (실제는 변동)
- 단순화된 수수료 (세금 미포함)
- 부분 체결 없음
- 시장 충격 미반영

→ 하지만 **학습용으로는 충분합니다!**

---

## 🎓 학습 포인트

- 실전 데이터 활용 (API 호출)
- 객체지향 설계 (Strategy 패턴)
- 데이터 분석 (기술적 지표)
- 사용자 인터페이스 (메뉴 시스템)
- 시각화 (Matplotlib)
- 파일 I/O (CSV/JSON)

---

## 📝 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.
