# 🎯 실전 모의투자 시스템 v2.3

강의 내용을 기반으로 개발한 **최적 자동화 전략 찾기** Python 모의투자 시스템입니다.

## 🎯 프로그램 목적

과거 데이터로 다양한 전략을 백테스팅하여 **가장 수익률이 높은 자동화 규칙**을 찾습니다.

## 🚨 최신 업데이트 (v2.3)

- 🎯 **그래프 시각화 대폭 개선** - 매수/매도 마커 3배 크기, 선명한 색상
- 🏆 **랭킹 시스템 완전 개편** - 각 거래 시점/설정 모두 표시
- 📊 **랭킹에서 그래프 표시** - 순위 선택 시 차트 확인 가능
- 💾 **전체 거래 내역 저장** - 모든 buy/sell 정보 보존

## v2.2.1 수정사항

- ✅ **UnboundLocalError 버그 수정** (프로그램 중단 문제 해결)
- ✅ **스포일러 방지** (백테스팅 시 미래 결과 숨김)
  - Before: "변동률 +34% 미리 표시" ❌
  - After: "시작가만 표시, 결과는 끝나고 확인" ✅
- ✅ 실제 투자처럼 순간순간 판단하며 진행

## v2.2 주요 기능

- ✅ **수수료율 입력 버그 수정** (0.05 입력 시 5%로 인식되던 문제)
- ✅ **거래 안 되는 이유 실시간 분석** (신호 발생 횟수 추적)
- ✅ **전략 설명 6배 강화** (언제 매수/매도하는지 명확히 표시)
- ✅ **기본값 최적화** (쿨다운 0일, 주문비율 30%)
- ✅ **디버깅 로그 추가** (문제 파악 용이)

## ⭐ 주요 기능

### 1. 💰 계좌 관리
- 가상 자산 입출금
- 잔액 조회 및 내역 확인
- 계좌 초기화

### 2. 📈 실제 종목 거래
- **한국 주식**: 삼성전자, 카카오, 네이버, SK하이닉스, LG화학
- **미국 주식**: 애플, 테슬라, 구글, 마이크로소프트, 엔비디아
- 또는 직접 티커 입력 가능

### 3. 📊 6가지 매매 전략
1. **SMA 크로스오버** - 단순이동평균 교차 전략 (초보자 추천)
2. **EMA 크로스오버** - 지수이동평균 교차 전략 (빠른 반응)
3. **RSI 전략** - 과매수/과매도 구간 활용 (역추세)
4. **MACD 전략** - 추세 추종 전략
5. **볼린저 밴드** - 변동성 활용 전략
6. **모멘텀 전략** - 강세 추종 전략

### 4. 📉 차트 시각화
- 캔들스틱 차트
- 라인 차트
- 매수/매도 포인트 표시
- 포트폴리오 가치 변화 그래프

### 5. 🔄 백테스팅
- 1개월 ~ 1년 기간 선택
- 실제 과거 데이터로 전략 검증
- 수익률 및 거래 통계 분석

### 6. 🏆 수익률 랭킹
- 모든 백테스팅 결과 자동 저장
- 수익률 기준 Top 20 표시
- 최고 전략 추적 및 분석
- 종목/전략/기간별 상세 정보

## 📁 프로젝트 구조

```
mock-investing/
├── assets/
│   ├── account.json         # 계좌 정보 (자동 생성)
│   ├── trades.csv           # 거래 내역 (자동 생성)
├── src/
│   └── mock_investing/
│       ├── __init__.py
│       ├── main.py          # 메인 프로그램
│       ├── models.py        # Portfolio, Trade 클래스
│       ├── account.py       # 계좌 관리
│       ├── market_data.py   # 실제 주식 데이터
│       ├── indicators.py    # 기술적 지표 (SMA, EMA, RSI, MACD, BB)
│       ├── strategies.py    # 매매 전략
│       ├── exec_engine.py   # 체결 로직
│       ├── storage.py       # 데이터 저장
│       └── visualization.py # 차트 시각화
├── pyproject.toml
└── README.md
```

## 🚀 설치 및 실행

### 1. Poetry 설치 확인
```bash
poetry --version
```

### 2. 프로젝트 의존성 설치
```bash
cd mock-investing
poetry install
```

### 3. 프로그램 실행
```bash
poetry run start
```

## 📖 사용 방법

### 기본 흐름
1. **계좌 관리** → 초기 자금 설정 (입금)
2. **모의투자 시작** → 종목 선택 → 기간 선택 → 전략 선택
3. **백테스팅 실행** → 결과 확인 → 차트 시각화
4. **거래 내역 복기** → 매매 포인트 분석

### 메뉴 구성

```
📋 메인 메뉴
1. 💰 계좌 관리 (입출금, 잔액 조회)
2. 📈 모의투자 시작 (백테스팅)
3. 🏆 수익률 랭킹 (역대 최고 전략) ⭐ NEW
4. 📊 거래 내역 복기
5. 📉 차트만 보기
6. ℹ️  프로그램 정보
0. 🚪 종료
```

## 💡 사용 예시

### 시나리오: 삼성전자 3개월 SMA 전략 테스트

1. 메인 메뉴에서 `1` 선택 → 계좌 관리
2. `2` 선택 → 100만원 입금
3. `0` 선택 → 메인 메뉴로
4. `2` 선택 → 모의투자 시작
5. 종목 선택: `1` (삼성전자)
6. 기간 선택: `2` (3개월)
7. 전략 선택: `1` (SMA 크로스오버)
8. 매매 설정 입력 (또는 Enter로 기본값)
9. 백테스팅 실행 → 결과 확인
10. `1` 선택 → 상세 차트 보기

## 📊 결과 예시

```
============================================================
📊 거래 통계
============================================================
총 거래 횟수:  25회
  - 매수:      13회
  - 매도:      12회
총 수수료:     1,250원

초기 자금:     1,000,000원
최종 자산:     1,156,430원
손익:          +156,430원
수익률:        +15.64%
============================================================
```

## 🛠️ 사용된 기술 스택

### 핵심 라이브러리
- **yfinance**: 실제 주식 데이터 (무료, 15-20분 지연)
- **matplotlib**: 차트 시각화
- **pandas**: 데이터 분석 및 처리

### 강의 내용 활용
- **4강 Function**: 지표 계산, 전략 로직 함수화
- **11강 Loop**: 데이터 순회, 백테스팅 루프
- **13강 File I/O**: CSV/JSON 파일 저장/읽기
- **14강 Collection**: 리스트, 딕셔너리 활용
- **15강 Class**: Portfolio, Trade, Strategy 클래스
- **Poetry**: 프로젝트 관리, 의존성, scripts

## 🎓 학습 포인트

### 1. 실전 데이터 활용
- API 호출 (yfinance)
- 외부 라이브러리 통합
- 에러 처리

### 2. 객체지향 설계
- Strategy 패턴 (전략 클래스)
- 상속과 다형성
- 클래스 설계 원칙

### 3. 데이터 분석
- 기술적 지표 계산
- 시계열 데이터 처리
- 성과 분석

### 4. 사용자 인터페이스
- 메뉴 시스템
- 입력 검증
- 에러 처리

### 5. 시각화
- Matplotlib 차트
- 캔들스틱 구현
- 복합 그래프

## ⚠️ 주의사항

1. **교육용 프로그램**: 실제 투자 권유가 아닙니다.
2. **과거 데이터**: 백테스팅은 과거 데이터 기반이며, 미래 수익을 보장하지 않습니다.
3. **지연 데이터**: 무료 API는 15-20분 지연된 데이터를 제공합니다.
4. **투자 책임**: 실제 투자 시 모든 손실 책임은 본인에게 있습니다.

## 🔧 확장 가능성

### 현재 구현된 기능
- ✅ 실제 종목 데이터
- ✅ 6가지 매매 전략
- ✅ 계좌 관리
- ✅ 차트 시각화
- ✅ 백테스팅

### 향후 추가 가능
- ⬜ 커스텀 전략 생성 UI
- ⬜ 웹 대시보드 (Streamlit)
- ⬜ 다중 종목 포트폴리오
- ⬜ 리스크 관리 지표
- ⬜ 전략 비교 기능

## 📝 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.

## 🙋‍♂️ 문의

프로젝트 관련 문의사항은 이슈로 등록해주세요.
