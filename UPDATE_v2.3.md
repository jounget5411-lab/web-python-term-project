# 🎉 v2.3 업데이트 - 랭킹 시스템 대폭 강화

## 주요 기능 개선

### 1. 📊 그래프 시각화 개선

**매수/매도 마커 크기 3배 증가**

**Before:**
- 작은 마커 (s=100-150)
- 구분하기 어려움
- 색상도 눈에 잘 안 띔

**After:**
- 대형 마커 (s=300-400)
- 굵은 테두리 (linewidths=2-3)
- 명확한 색상 (lime=매수, red=매도)
- 투명도 0.95로 선명하게 표시

```
이제 그래프에서 매수/매도 시점이 한눈에 보입니다! 🎯
```

---

### 2. 🏆 랭킹 시스템 완전 개편

**이전:**
- 메뉴 4: 거래 내역 복기 (단순 trades.csv 읽기)
- 랭킹에서 간단한 요약만 표시

**현재:**
- **메뉴 3: 수익률 랭킹** (완전 개편)

#### 랭킹 리스트 예시:
```
🏆 백테스팅 수익률 랭킹
================================================================================
순위 수익률     종목                 전략                      일시                
--------------------------------------------------------------------------------
1    ▲ +15.0%  삼성전자             SMA 크로스오버 (5/20)     2025-11-22 15:30:15 
2    ▼ -2.0%   카카오               RSI 전략 (과매수/과매도) 2025-11-22 15:25:42 
3    ▲ +8.5%   엔비디아             모멘텀 전략               2025-11-22 15:20:23 
================================================================================
```

#### 순위 선택 시 표시 내용:
```
📊 백테스팅 결과 #1
================================================================================
종목:        삼성전자 (005930.KS)
기간:        1년
전략:        SMA 크로스오버 (5/20)

⚙️  매매 설정:
   수수료:   0.050%
   쿨다운:   0일
   주문비율: 30%

💰 수익 분석:
   초기 자금:   1,000,000원
   최종 자산:   1,150,000원
   손익:        +150,000원
   수익률:      +15.0%

📈 거래 통계:
   거래 횟수:   12회
   총 수수료:   450원

📋 거래 내역 (12건):
--------------------------------------------------------------------------------
순번 구분   시점(일)   가격         수량       수수료    
--------------------------------------------------------------------------------
1    BUY    25         70,286원    4.2550     150원
2    SELL   45         75,500원    4.2550     160원
3    BUY    67         72,300원    4.1433     150원
...
--------------------------------------------------------------------------------

📊 그래프를 표시하시겠습니까? (y/n): y
→ 캔들스틱 차트 + 매수/매도 시점 표시!
```

---

### 3. 💾 데이터 저장 개선

**각 백테스팅 실행마다 저장:**
- ✅ 종목 정보 (티커, 이름)
- ✅ 기간 (1개월/3개월/6개월/1년)
- ✅ 전략 이름
- ✅ 매매 설정 (수수료, 쿨다운, 주문비율) ⭐ NEW
- ✅ 수익 정보 (초기자금, 최종자산, 수익률)
- ✅ 거래 내역 전체 (각 buy/sell 시점, 가격, 수량) ⭐ NEW

**저장 위치:**
- `assets/backtest_history.json`
- JSON 형식으로 모든 정보 저장
- 프로그램 재시작해도 유지됨

---

## 사용 예시

### 시나리오: 최고 전략 찾기

```
1. 여러 조합 테스트:
   - 삼성전자 + 6가지 전략
   - 카카오 + 3개월/6개월
   - 엔비디아 + 다양한 쿨다운 설정

2. 메뉴 3 (수익률 랭킹) 선택:
   → Top 20 한눈에 확인

3. 1위 선택:
   → 상세 정보 + 거래 내역 확인
   → 그래프로 매수/매도 시점 확인

4. 설정 복제:
   → 1위 전략의 설정 그대로 다른 종목에 적용
```

---

## 변경사항 요약

| 항목 | v2.2 | v2.3 |
|------|------|------|
| **마커 크기** | 100-150 | 300-400 (3배) |
| **마커 색상** | 기본 | lime(매수), red(매도) |
| **랭킹 상세** | 간단 요약 | 전체 거래내역 + 설정 |
| **그래프 표시** | 백테스팅 중에만 | 랭킹에서도 가능 |
| **저장 데이터** | 요약만 | 거래 + 설정 전부 |

---

## 메뉴 구조

```
1. 💰 계좌 관리
2. 📈 모의투자 시작 (백테스팅)
3. 🏆 수익률 랭킹 ⭐ 대폭 강화!
   - 순위 번호: 상세 정보 + 그래프
   - 각 거래의 buy/sell 시점 확인
   - 매매 설정 확인하여 재현 가능
4. 📊 거래 내역 복기 (최근 실행분)
5. 📉 차트만 보기
6. ℹ️  프로그램 정보
0. 🚪 종료
```

---

## 🎯 이제 할 수 있는 것

### Before v2.3:
```
사용자: "어떤 전략이 좋았는지 기억 안 나..."
→ 일일이 다시 테스트해야 함
→ 매수/매도 시점이 그래프에서 잘 안 보임
```

### After v2.3:
```
사용자: "메뉴 3에서 랭킹 확인 → 1위 선택 → 상세 내역 확인"
→ 모든 거래 시점 명확히 표시
→ 설정 그대로 다른 종목에 적용 가능
→ 그래프에서 매수/매도 한눈에 확인
```

---

## 버전 히스토리

- v2.0: 초기 버전
- v2.1: 랭킹 시스템 추가
- v2.2: 수수료 버그 수정, 전략 설명 강화
- v2.2.1: 스포일러 제거
- **v2.3: 랭킹 시스템 대폭 강화 + 그래프 개선** ⭐

